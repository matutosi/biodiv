<html>
<head>
<!--  <script src="js/prototype.js"></script>    -->
<!--  <script src="js/fabtabulous.js"></script>  -->
<!--  <script src="js/tablekit.js"></script>     -->

<script src="table.js"></script>
<script src="sort.js"></script>
<script src="date.js"></script>
<script src="download.js"></script>

<script src="table_setting.js"></script>

<style>
  table{
    border-collapse:collapse;
  }
  table td{
    font-size   : 12pt;
    border-width: 1.5px 0px; /* line width: horizontal, vertical */
    border-color: #00552e;   /* line color    */
    border-style: solid;     /* line type     */
    padding     : 0.3em 1em; /* innder margin */
  }
  table th{
    cursor:pointer;
    background-color:#00552e;
    color:white;
    border-color: white;
    border-style: solid;
    padding: 0.3em 1em;
  }
</style>
</head>

<body>
<!--  タブ切り替え https://allabout.co.jp/gm/gc/23969/  -->

<p>
  <table id="table_setting" class="sortable resizable">
  </table>
  <input type="button" value="table setting"  onclick="createSettingTable('table_setting')" />
</p>

<hr>

<table id="occurrence">
</table>

<input type="button" value="create occurrence table"  onclick="createOccurrenceTable()" />

<script>

// Helper to get values from input objects
//    @params objs   list objects by document.getElementsByClassName()
//    @return        A vector.
function getValues(objs){
  var res = [];
  for(let i = 0; i < objs.length; i++){ res[i] = objs[i].value; }
  return res
}


function createOccurrenceTable(){
  var table = document.getElementById("occurrence");
  const col_names = document.getElementsByClassName("table_setting_1");
  const dat_types = document.getElementsByClassName("table_setting_2");
  const optionals = document.getElementsByClassName("table_setting_3");
  const n = col_names.length;
  createTable(table, getValues(col_names));

  var cl = "occurrence_data";
  var id = "";

  var tr = document.createElement('tr');
  for(let i=0; i<n; i++){
    var td = document.createElement('td');
    switch(dat_types[i].value){
        case "auto":
          td.innerHTML = getNow();
          break;
        case "button":
  //      createInput(cl, id, ty, va, pl, on, im);
          td.appendChild(createInput(cl, id, "button", "DELETE", "", "deleteRow(this)", ""));
          break;
        case "checkbox":
          td.appendChild(createInput(cl, id, "checkbox", "true", "", "", ""));
          break;
        case "fixed":
          td.innerHTML = optionals[i].value;
          break;
        case "list":
          td.appendChild(createSelectOpt("", optionals[i].value.split(','), "", id));
          break;
        case "text":
          td.appendChild(createInput(cl, id, "text", "", "", "", ""));
          break;
        case "number":
          td.appendChild(createInput(cl, id, "number", "", "", "", "numeric"));
          break;
      }
      tr.appendChild(td);
  }
  table.appendChild(tr);
}
</script>



<!--
<input type="button" value="create table"  onclick="copyRowUpward('sort_table')" />

<p>
  <form>
    <label>Item (separete by ","): 
      <input id="col_item" type="text" size="50" value="Identified,Sampled,Stand,Layer,Species,Cover" inputmode="text">
    </label>
    <input type="button" value="create table"  onclick="createTable_1('occurrence', 'col_item')" />
  </form>
  <table id="occurrence">
  </table>
  <input type="button" value="add first row"  onclick="addFirstRow('occurrence')" />
</p>
<hr>

<input id="test" type="number" min="0" max="100" inputmode="numeric">

-->

<!--
<hr>
<table id="sort_table">
-->

<!--
<col span="1" style="visibility: collapse">
-->

<!--
<col span="1">
<col span="1">
<col span="6">

  <tr>
    <th>date</th>
    <th>del</th>
    <th>Identified</th>
    <th>Sampled</th>
    <th>Layer</th>
    <th>Species</th>
    <th>cover</th>
  </tr>

  <tr>
    <td><script>document.write(getNow())</script></td>
    <td><input type="button" value="DELETE" onclick="deleteRow(this)"></td>
    <td><input type="checkbox"></td>
    <td><input type="checkbox"></td>
    <td><span contenteditable="true">B</span></td>
    <td><span contenteditable="true">aaa</span></td>
    <td><span contenteditable="true">20</span></td>
  </tr>

  <tr>
    <td><script>document.write(getNow())</script></td>
    <td><input type="button" value="DELETE" onclick="deleteRow(this)"></td>
    <td><span contenteditable="true"><input type="checkbox"></span></td>
    <td><span contenteditable="true"><input type="checkbox"></span></td>
    <td><input type="text"size="10" /></td>
    <td><input type="text"size="10" /></td>
    <td><input type="text"size="10" /></td>
  </tr>

  <tr>
    <td><script>document.write(getNow())</script></td>
    <td><input type="button" value="DELETE" onclick="deleteRow(this)"></td>
    <td><span contenteditable="true"><input type="checkbox"></span></td>
    <td><span contenteditable="true"><input type="checkbox"></span></td>
    <td><input type="text"size="10" /></td>
    <td><input type="text"size="10" /></td>
    <td><input type="text"size="10" /></td>
  </tr>
</table>

<p>
  <input type="button" value="Add rows" onclick="addRow('sort_table'), 5" />
</p>

<p>
  <input type="button" value="Download data" onclick="download('sort_table')" />
</p>

<p>
  <form>
    <label>col name: <input type="text" id="add_col_name" size="10" /></label>
    <input type="button" value="add col"  onclick="addCol('sort_table', 'add_col_name')" />
  </form>
</p>
-->

</body>
</html>
